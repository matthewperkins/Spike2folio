var HorzCursors[5], HorzCursorChans%[5];   ' 0 position is number of Horizontal cursor, their positions are at 1 - 4, there can only be 4 horizontal cursors
var VertCursors%[10];     ' 0 position is number of Vertical cursor, their positions are at 1 - 9, there can only be 9 cursors
var ChannelList%[20], i%; 
var topview%, viewlist%[100], viewtype% := 1; '1 is time views
var timerange;

topview% := View();
ViewList(viewlist%[], viewtype%);
GetCursors();
for i% := 1 to viewlist%[0] do
    View(viewlist%[i%]);
    SetTime();
    XRange(0,timerange);
    ChanList(ChannelList%[],1);
    ChanHide(-1);
    ChanShow(ChannelList%);
    if (viewlist%[i%]=topview%) then continue endif;
    SetCursors();
    next;
FrontView(topview%);

proc SetTime()
    if (MaxTime()> 120) then timerange := 120;
    else timerange := MaxTime();
    endif;    
end

proc GetCursors()
    var hcursorcounter%:=0, vcursorcounter%:=0, v%, h%;
    for h% := 1 to 4 do
        if (HCursorExists(h%)) then
            hcursorcounter% += 1;
            HorzCursorChans%[0] := hcursorcounter%;
            HorzCursorChans%[h%] := HCursorChan(h%);
            HorzCursors[h%] := HCursor(h%);
        endif;
    next;
    for v% := 1 to 9 do
        if (CursorExists(v%)) then
            vcursorcounter% += 1;
            VertCursors%[0] := vcursorcounter%;
            VertCursors%[v%] := Cursor(v%);
        endif;    
    next;        
end

proc SetCursors()
    var h%, v%;
    CursorDelete(-1);
    HCursorDelete(-1);
    for h% := 1 to HorzCursorChans%[0] do
        HCursorNew(HorzCursorChans%[h%],HorzCursors[h%]);
    next;
    for v% := 1 to VertCursors%[0] do
        CursorNew(VertCursors%[v%],v%)
    next;
end
